# 可观测性与错误模型

## 设计目标

- 为所有工具调用提供统一的错误模型与观测能力。
- 支持事后审计与问题定位。

## 核心概念

- **观测事件**：调用开始、结束、失败、重试、降级。
- **错误分类**：权限错误、预算错误、输入错误、执行错误、外部依赖错误。
- **错误响应**：结构化错误对象，包含可恢复建议。

## 错误示意（JSON）

```json
{
  "error_code": "BUDGET_EXCEEDED",
  "message": "调用超出预算",
  "recoverable": true,
  "suggestion": "降低调用频率或申请更高预算",
  "trace_id": "trace-123"
}
```

## 设计约束

- 错误必须可追踪到具体 Skill 与调用上下文。
- 观测事件需要关联任务与用户维度。

## 非目标

- 不定义具体日志系统或指标平台。

## 未来演进方向

- 支持异常模式检测与自动化告警。
